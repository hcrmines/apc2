#!/usr/bin/env python

import rospy
import baxter_interface

from sys import argv
from time import sleep

rospy.init_node('quickAndDirty')

eb = baxter_interface.RobotEnable()
eb.reset()
eb.enable()

rightLimb = baxter_interface.Limb('right')

rightHand = baxter_interface.Gripper('right')
rightHand.calibrate()


leftLimb = baxter_interface.Limb('left')
leftLimb.move_to_joint_positions({'left_w0': -2.2610876787597656, 'left_w1': -1.2900778411376954, 'left_w2': 0.5430291982910157, 'left_e0': -2.264922630725098, 'left_e1': 1.9546750167297364, 'left_s0': 0.06749515458984376, 'left_s1': 0.35089810482788086})

if (argv[1]=='leftHand'):
    quit()

#rightLimb.move_to_joint_positions({'right_s0': 0.5806117275512696, 'right_s1': -1.196505013183594, 'right_w0': 0.46939812055664065, 'right_w1': 1.5903545800231935, 'right_w2': -0.220893233203125, 'right_e0': -1.6766409992431641, 'right_e1': 1.0718690743103028})
#quit()


def drop():
    dropList = [{'right_s0': -0.7106165991760255, 'right_s1': -0.6918253345458985, 'right_w0': -0.10200972227783203, 'right_w1': -1.5719468105895997, 'right_w2': -0.0732475825378418, 'right_e0': -0.09088836157836915, 'right_e1': 2.506908099737549},
    {'right_s0': -1.2198982201721191, 'right_s1': -0.6504078533203126, 'right_w0': -2.0563012438110353, 'right_w1': -1.5451021468322754, 'right_w2': -0.23891750744018556, 'right_e0': -0.054456317907714845, 'right_e1': 2.3546605067138673},
    {'right_s0': -1.4220001887451172, 'right_s1': -0.09970875109863282, 'right_w0': -2.310558559112549, 'right_w1': -1.568878849017334, 'right_w2': -0.2665291615905762, 'right_e0': -0.1825437135498047, 'right_e1': 1.668587600115967},
    {'right_s0': -1.4135632944213867, 'right_s1': -0.22281070918579102, 'right_w0': -2.1736507739501953, 'right_w1': -0.7869321432861328, 'right_w2': -0.3950000524291992, 'right_e0': -0.1833107039428711, 'right_e1': 1.8472963617004396},
    0,
    {'right_s0': -1.4116458184387208, 'right_s1': -0.20900488211059573, 'right_w0': -1.9769177381286622, 'right_w1': -0.779645734552002, 'right_w2': -0.42069423059692385, 'right_e0': -0.17180584804687501, 'right_e1': 1.7974419861511233},
    {'right_s0': -1.4135632944213867, 'right_s1': -0.22281070918579102, 'right_w0': -2.1736507739501953, 'right_w1': -0.7869321432861328, 'right_w2': -0.3950000524291992, 'right_e0': -0.1833107039428711, 'right_e1': 1.8472963617004396},
    {'right_s0': -1.4220001887451172, 'right_s1': -0.09970875109863282, 'right_w0': -2.310558559112549, 'right_w1': -1.568878849017334, 'right_w2': -0.2665291615905762, 'right_e0': -0.1825437135498047, 'right_e1': 1.668587600115967},
    {'right_s0': -1.2198982201721191, 'right_s1': -0.6504078533203126, 'right_w0': -2.0563012438110353, 'right_w1': -1.5451021468322754, 'right_w2': -0.23891750744018556, 'right_e0': -0.054456317907714845, 'right_e1': 2.3546605067138673},
    {'right_s0': -0.7106165991760255, 'right_s1': -0.6918253345458985, 'right_w0': -0.10200972227783203, 'right_w1': -1.5719468105895997, 'right_w2': -0.0732475825378418, 'right_e0': -0.09088836157836915, 'right_e1': 2.506908099737549}
    ]

    for move in dropList:
        if move:
            rightLimb.move_to_joint_positions(move, threshold=0.1)
        else:
            rightHand.open()
            sleep(0.5)


movement = {'crayons':[
        {'right_s0': -0.6273981415283204, 'right_s1': -0.5813787179443359, 'right_w0': -0.411490345880127, 'right_w1': -1.5213254446472169, 'right_w2': 0.5909660978576661, 'right_e0': -0.7896166096618653, 'right_e1': 2.0451798831115724},
        {'right_s0': -0.5898156122680664, 'right_s1': -0.46786413977050784, 'right_w0': -0.5395777415222168, 'right_w1': -1.0450244105529787, 'right_w2': 0.8348690428527833, 'right_e0': -0.802271951147461, 'right_e1': 1.5209419494506837},
        0,
        {'right_s0': -0.45827675985717775, 'right_s1': -1.2536457974670412, 'right_w0': -1.0711020839172365, 'right_w1': -0.6089903720947266, 'right_w2': 0.9361117747375489, 'right_e0': -0.8137768070434571, 'right_e1': 2.2016459232971193}
    ],
    'glue':[
    {'right_s0': -0.9464661450439453, 'right_s1': -0.3025777100646973, 'right_w0': -0.3723738358337403, 'right_w1': -1.1727283109985351, 'right_w2': 0.2860874166137696, 'right_e0': -0.28723790220336914, 'right_e1': 1.6843109031738281},
    {'right_s0': -0.853276812286377, 'right_s1': -0.11313108297729493, 'right_w0': -0.44638840876464847, 'right_w1': -0.7938350568237306, 'right_w2': 0.5522330830078125, 'right_e0': -0.3781262637817383, 'right_e1': 1.1554710271545412},
    0,
    {'right_s0': -0.8517428315002442, 'right_s1': -0.30794664281616213, 'right_w0': -0.4490728751403809, 'right_w1': -1.5504710795837404, 'right_w2': 0.5188690009094239, 'right_e0': -0.47131559653930666, 'right_e1': 2.0271556088745117}
    ],
    'fuzzyGreenThing':[
        {'right_s0': -0.47706802448730473, 'right_s1': -1.4335050446411133, 'right_w0': -1.368694356427002, 'right_w1': -0.7884661240722657, 'right_w2': 1.1769467581604005, 'right_e0': -0.9598884769226075, 'right_e1': 1.9101895739318848},
        {'right_s0': -0.411490345880127, 'right_s1': -1.0641991703796387, 'right_w0': -1.1121360699462892, 'right_w1': -0.5361262847534181, 'right_w2': 1.2682186149353027, 'right_e0': -0.9468496402404786, 'right_e1': 1.553539041156006},
        {'right_s0': -0.32405344107055667, 'right_s1': -0.8298836052978517, 'right_w0': -1.470704078704834, 'right_w1': -0.6952767913146973, 'right_w2': 1.7610099424804688, 'right_e0': -1.1915195756286623, 'right_e1': 1.4434759197509766},
        {'right_s0': -0.35780101836547856, 'right_s1': -0.6212622183837891, 'right_w0': -1.6237186621215822, 'right_w1': -0.8705340961303711, 'right_w2': 2.214684759979248, 'right_e0': -1.3322623127563478, 'right_e1': 1.2141457922241212},
        0,
        {'right_s0': -0.3121650899780274, 'right_s1': -0.8183787494018555, 'right_w0': -1.6858448839599611, 'right_w1': -1.264767158166504, 'right_w2': 2.247665346881104, 'right_e0': -1.5263108822021485, 'right_e1': 1.311937067340088},
    {'right_s0': -0.3121650899780274, 'right_s1': -0.8183787494018555, 'right_w0': -1.6858448839599611, 'right_w1': -1.264767158166504, 'right_w2': 2.247665346881104, 'right_e0': -1.5263108822021485, 'right_e1': 1.311937067340088}
    ],
    'highlighters':[
        {'right_s0': 1.0139612996337892, 'right_s1': -0.9200049764831544, 'right_w0': 0.7090826183898926, 'right_w1': 0.07401457293090821, 'right_w2': -0.37007286465454103, 'right_e0': -1.7579419809082033, 'right_e1': 1.916325497076416},
        {'right_s0': 0.556835025366211, 'right_s1': -0.6109078480773926, 'right_w0': 1.003990424523926, 'right_w1': 0.21475731005859378, 'right_w2': -0.5668059004760743, 'right_e0': -1.5075196175720216, 'right_e1': 1.5681118586242677},
        0,
        {'right_s0': 0.6573107668579102, 'right_s1': -1.1159710219116212, 'right_w0': 0.20286895896606447, 'right_w1': -0.8237476821533204, 'right_w2': 0.21399031966552737, 'right_e0': -1.3993739721496583, 'right_e1': 2.27834496260376},
        {'right_s0': -0.556835025366211, 'right_s1': -1.4369565014099122, 'right_w0': -1.4511458236816408, 'right_w1': -1.5711798201965332, 'right_w2': 0.5798447371582032, 'right_e0': -0.7554855371704102, 'right_e1': 2.314393511077881}
    ],
    'goggles':[
    {'right_s0': 0.6868398969909668, 'right_s1': -1.1370632577209474, 'right_w0': -3.0403499181152345, 'right_w1': -1.0181797467956544, 'right_w2': 3.029612052612305, 'right_e0': -1.4204662079589845, 'right_e1': 0.806106903112793},
    {'right_s0': -0.027228158953857422, 'right_s1': -0.781563210534668, 'right_w0': -1.979985699700928, 'right_w1': -1.200723460345459, 'right_w2': 2.8988401905944827, 'right_e0': -1.487194372155762, 'right_e1': 0.23891750744018556},
    {'right_s0': -0.01955825502319336, 'right_s1': -0.7911505904479981, 'right_w0': -1.9865051180419924, 'right_w1': -1.100631214050293, 'right_w2': 2.9111120368835453, 'right_e0': -1.499082723248291, 'right_e1': 0.22894663233032228},
    {'right_s0': -0.08743690480957032, 'right_s1': -0.6761020314880372, 'right_w0': -1.8265876210876466, 'right_w1': -1.1635244262817384, 'right_w2': 2.8589566901550296, 'right_e0': -1.5056021415893555, 'right_e1': 0.26614566639404297},
    0,
    {'right_s0': 1.0431069345703126, 'right_s1': -0.7942185520202637, 'right_w0': -2.551777037731934, 'right_w1': -0.8110923406677246, 'right_w2': 3.031146033398438, 'right_e0': -1.9638789014465334, 'right_e1': 1.7767332455383302}
    ],
    'greenies':[
    {'right_s0': 0.39538354762573247, 'right_s1': -1.2900778411376954, 'right_w0': -0.9180875005004884, 'right_w1': -0.7696748594421388, 'right_w2': 1.1631409310852052, 'right_e0': -1.908655593145752, 'right_e1': 1.8733740350646975},
    {'right_s0': -0.2519563441223145, 'right_s1': -0.6653641659851075, 'right_w0': -1.0139612996337892, 'right_w1': -0.7190534934997559, 'right_w2': 2.1130585328979494, 'right_e0': -1.6835439127807619, 'right_e1': 1.1769467581604005},
    0,
    {'right_s0': 0.3006602340820313, 'right_s1': -1.3069516297851564, 'right_w0': -2.0095148298339844, 'right_w1': -1.5730972961791994, 'right_w2': 2.364247886627197, 'right_e0': -2.1701993171813965, 'right_e1': 1.2129953066345216}
    ],
    'balls':[
    #    {'right_s0': -1.125174906628418, 'right_s1': -0.8950777887084962, 'right_w0': -0.6864564017944337, 'right_w1': -1.200723460345459, 'right_w2': 0.3305728594116211, 'right_e0': -0.218975757220459, 'right_e1': 2.087747849926758},
        {'right_s0': -0.2749660559143067, 'right_s1': -0.5326748279846192, 'right_w0': 0.2193592524169922, 'right_w1': -0.6101408576843262, 'right_w2': 0.07631554411010742, 'right_e0': -0.39960199478759767, 'right_e1': 1.8123982988159182},
        {'right_s0': -0.2910728541687012, 'right_s1': -0.4291311249206543, 'right_w0': 0.23546605067138673, 'right_w1': -0.0981747703125, 'right_w2': 0.21475731005859378, 'right_e0': -0.4490728751403809, 'right_e1': 1.432738054248047},
        {'right_s0': -0.2676796471801758, 'right_s1': -0.23508255547485354, 'right_w0': 0.29605829172363285, 'right_w1': -0.23009711791992188, 'right_w2': 0.2580922672668457, 'right_e0': -0.49432530833129884, 'right_e1': 1.3219079424499514},
        0,
        {'right_s0': 0.1461116698791504, 'right_s1': -0.3647039319030762, 'right_w0': -0.2814854742553711, 'right_w1': -0.3531990760070801, 'right_w2': 1.1282428682006838, 'right_e0': -0.8785874952575684, 'right_e1': 1.8154662603881837},
        {'right_s0': 0.44447093278198246, 'right_s1': -0.5322913327880859, 'right_w0': -0.3163835371398926, 'right_w1': -0.5334418183776856, 'right_w2': 1.142048695275879, 'right_e0': -1.0764710166687013, 'right_e1': 2.4420974115234375}
    ]
        
}

if len(argv)>1:
    for move in movement[argv[1]]:
        if move:
            rightLimb.move_to_joint_positions(move)
        else:
            rightHand.close()
            sleep(0.5)
    drop()
else:
    sleep(3)
    drop()
    for key in movement:
        print "grabbing: ", key
        for move in movement[key]:
            if move:
                rightLimb.move_to_joint_positions(move, timeout=15)
            else:
                rightHand.close()
                sleep(0.5)
        drop()


quit()


